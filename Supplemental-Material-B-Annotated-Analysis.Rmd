---
title: "Supplemental Information B: Full Annotated Analysis and Reproducible Code"
subtitle: "Suppplemental Material for 'Psychological Needs During Intergroup Contact [working title]'"
author:
- Jannis Kreienkamp^1,2^
- Maximilian Agostini^1,2^
- Laura Bringmann^1,2^
- Peter de Jonge^1,2^
- Kai Epstude^1,2^
- ^1^University of Groningen, Department of Psychology
- ^2^Author order to be discussed; currently alphabetic by last name
- "Author Information:"
- "Correspondence concerning this article should be addressed to Jannis Kreienkamp, Department of Psychology, University of Groningen, Grote Kruisstraat 2/1, 9712 TS Groningen (The Netherlands).  E-mail: <a href='mailto:j.kreienkamp@rug.nl'>j.kreienkamp@rug.nl</a>"
- 'The main manuscript is available at <a href="https://www.doi.org/ToBePublished" target="_blank">doi.org/ToBePublished</a>'
- 'The data repository for this manuscript is available at <a href="https://osf.io" target="_blank">OSF link goes here</a>'
- 'The GitHub repository for this manuscript is available at <a href="https://janniscodes.github.io/intergroup-contact-needs/" target="_blank">janniscodes.github.io/intergroup-contact-needs/</a>'
date: "Last updated: `r format(Sys.time(), '%d %B, %Y')`"
output: 
  bookdown::html_document2:
    fig_caption: yes
    md_extensions: +footnotes
    code_folding: hide
    mathjax: default
    theme: yeti
    toc: yes
    toc_float: yes
    number_sections: false
    css: style.css
    includes:
      in_header: "_includes/head-custom-rmd.html" 
editor_options:
  chunk_output_type: console
bibliography: references.bib
csl: apa.csl
---

<style type="text/css">
.main-container {
  max-width: 1300px;
  margin-left: auto;
  margin-right: auto;
}
.table {
  margin-left:auto; 
  margin-right:auto;
}
</style>


```{r setup, include=FALSE}
# R Studio Clean-Up
  cat("\014") # clear console
  #rm(list=ls()) # clear workspace - use restart R instead [cmd/alt + shift + F10]
  gc() # garbage collector
  
# Install and Load Packages
# !IMPORTANT!
# BEFORE FIRST RENDER:
# To install all relevant packages please run "renv::restore()" (or renv::init() and then initiate from lockfile) in the console before the first use to ensure that all packages are using the correct version.
# to store the packages in a contained library within the project folder: renv::settings$use.cache(FALSE) and add 'RENV_CONFIG_SANDBOX_ENABLED = FALSE' to an '.Renviron' file 
lib <- c("rmarkdown", "knitr", "remedy", "bookdown", "psych",
         "ggplot2", "ggthemes", "haven", "RColorBrewer", "plotly", "gridExtra",
         "sessioninfo", "tibble", "pander", "devtools",
         "data.table", "dplyr", "tidyr", "Hmisc", "kableExtra", 
         "stringr", "stringi", "reshape2", "lubridate")
invisible(lapply(lib, library, character.only = TRUE))  
rm(lib)  

# Load Custom Packages  
  source("./scripts/functions/fun.panel.R")
  source("./scripts/functions/themes.R")
  source("./scripts/functions/binaryCor.R")

# Markdown Options
  knitr::opts_knit$set(root.dir = rprojroot::find_rstudio_root_file()) # set working directory
  knitr::opts_knit$get("root.dir") # check working directory
  options(scipen = 999, digits = 4, width = 400) #removes scientific quotation
  #knitr::opts_chunk$set(echo = TRUE, cache = F, cache.path = rprojroot::find_rstudio_root_file('cache/')) # cache settings
  knitr::knit_hooks$set(
   error = function(x, options) {
     paste('\n\n<div class="alert alert-danger">',
           gsub('##', '\n', gsub('^##\ Error', '**Error**', x)),
           '</div>', sep = '\n')
   },
   warning = function(x, options) {
     paste('\n\n<div class="alert alert-warning">',
           gsub('##', '\n', gsub('^##\ Warning:', '**Warning**', x)),
           '</div>', sep = '\n')
   },
   message = function(x, options) {
     paste('\n\n<div class="alert alert-info">',
           gsub('##', '\n', x),
           '</div>', sep = '\n')
   }
  )
  htmltools::tagList(rmarkdown::html_dependency_font_awesome())

# Global Chunk Options
  knitr::opts_chunk$set(fig.width=12, fig.height=8, fig.path='Figures/',
                        echo=TRUE, warning=FALSE, message=FALSE)
```

<br/>

Note. Boxplots display the interquartile range (IQR, center box), and the whiskers extend 1.5*IQR from the lower and upper hinge. The white point indicates the mean and the white center line indicates the median.   

<br/>

# **Data Preparation**  

## Data Import  

## Data Cleaning  

## Data Exclusions  



# **Software Information**  
The full session information with all relevant system information and all loaded and installed packages is available in the collapsible section below.  

<details>
  <summary>System Info</summary>
  
  \renewcommand{\arraystretch}{0.8} <!-- decrease line spacing for the table -->
```{r Reproducibility-SessionInfo-R-environment, echo=FALSE, message=FALSE, warning=FALSE, fig.align="center", out.width='100%', results='asis'}
  df_session_platform <- devtools::session_info()$platform %>% 
    unlist(.) %>% 
    as.data.frame(.) %>% 
    rownames_to_column(.)
  
  colnames(df_session_platform) <- c("Setting", "Value")
  
  kbl(
    df_session_platform, 
    booktabs = T, 
    align = "l",
    caption = "R environment session info for reproducibility of results" # complete caption for main document
  ) %>% 
    kable_classic(full_width = F, 
                  lightable_options = "hover", 
                  html_font = "Cambria") 
```
  \renewcommand{\arraystretch}{1} <!-- reset row height/line spacing -->
 </details>
 <br>
 <details>
  <summary>Package Info</summary>

\renewcommand{\arraystretch}{0.6} <!-- decrease line spacing for the table -->
```{r Reproducibility-SessionInfo-R-packages, echo=FALSE, message=FALSE, warning=FALSE, fig.align="center", out.width='100%', results='asis'}
df_session_packages <- devtools::session_info()$packages %>% 
  as.data.frame(.) %>% 
  filter(attached == TRUE) %>% 
  dplyr::select(loadedversion, date, source) %>% 
  rownames_to_column

colnames(df_session_packages) <- c("Package", "Loaded version", "Date", "Source")

kbl(
  df_session_packages, 
  booktabs = T, 
  align = "l",
  caption = "Package info for reproducibility of results" # complete caption for main document
) %>% 
  kable_classic(full_width = F, 
                  lightable_options = "hover", 
                  html_font = "Cambria") 
```
\renewcommand{\arraystretch}{1} <!-- reset row height/line spacing -->
</details>
<br>
<details>
  <summary>Full Session Info (including loaded but unattached packages --- for troubleshooting only)</summary>
    `r pander(sessionInfo(), compact = FALSE)`
</details>


--------------------------------------------------------------------

</br>  

# **References**  

<div class="tocify-extend-page" data-unique="tocify-extend-page" style="height: 0;"></div>

